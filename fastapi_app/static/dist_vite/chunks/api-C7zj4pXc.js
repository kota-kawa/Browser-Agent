const h=r=>!!r&&typeof r=="object"&&!Array.isArray(r),u=r=>h(r)&&typeof r.error=="string",w=(r,s,o)=>o&&u(r)?r.error:s,g=async(r,{fallback:s,throwOnParseError:o})=>{try{return await r.json()}catch(t){if(o)throw t;return s??{}}},n=async(r,s,o={})=>{const{fallback:t,errorMessage:c,preferErrorBody:i=!0,throwOnNonOk:y=!0,throwOnParseError:p=!0,parseJson:f=!0}=o,e=await fetch(r,s),a=f?await g(e,{fallback:t,throwOnParseError:p}):t??{};if(!e.ok&&y){const d=w(a,c||`Request failed (${e.status})`,i);throw new Error(d)}return{data:a,response:e}},J=async(r,s)=>n(r,void 0,s),O=async(r,s)=>n(r,{method:"POST"},s),E=async(r,s,o)=>n(r,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)},o);export{E as a,J as g,O as p,n as r};
